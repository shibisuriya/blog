---
title: 'Tutorial 2: How to manage dotfiles using GNU Stow'
date: '2025-08-19'
lastmod: '2025-08-19'
tags:
  [
    'tutorial',
    'dotfiles',
    'distro-hopping',
    'developer-productivity',
    'ricing',
    'docker',
    'unix',
    'linux',
    'gnu-stow',
    'neovim',
    'ansible-playbook',
    'lab',
    'devops',
  ]
draft: false
series: 'How to manage dotfiles'
part: 2
summary:
  'We will be improving our dotfiles setup from tutorial 1 using GNU stow.'
images: ['/static/images/managing-dotfiles/dotfiles-banner.webp']
layout: PostLayout
---

Now that you know
[what dotfiles are](/blog/how-to-manage-dotfiles#what-are-dotfiles),
[the benefits you can experience by managing them](/blog/how-to-manage-dotfiles#why-should-i-care-about-dotfiles)
&
[how to manage them by moving them into a git repository & manually symlinking them to their original location using the `ln` command](/blog/how-to-manage-dotfiles#tutorial),
we will be improving our existing setup from tutorial 1 using
[GNU Stow](https://www.gnu.org/software/stow/) - a neat tool that automates the
process of creating & removing symlinks.

We will first revisit our existing setup, learn what GNU Stow is, its quirks and
then integrate it into our existing setup.

# Existing setup

We have created a git repo at `~/Desktop/dotfiles` using the `git init` command
& moved all of our dotfiles into it. We are then symlinking each dotfile to its
original location using the `ln` command. For example, the bash shell looks for
`.bashrc` (bash's configuration file) at `~` (user's home directory -
`/user/<username>`).

```bash
cd ~/Desktop/dotfiles
ls -a
.  ..  .bashrc  keybindings.json
ln -s .bashrc ~/
```

Since we have multiple dotfiles in our git repository, typing & executing the
`ln` command for each dotfile is annoying! So we have written the `ln` commands
in a shell script - `symlink.zsh`.

To symlink all of your dotfiles to their original location,

```bash
./symlink.zsh
```

We will be replacing
[`symlink.zsh`](/blog/how-to-manage-dotfiles#ehh-what-are-symlinks) (a shell
script that symlinks each dotfile to its original location) with GNU Stow in
this tutorial.

# Tutorial

1. Install GNU Stow,

   - On macOS, using Homebrew,

     ```sh
     brew install stow
     ```

   - On Debian/Ubuntu based distros, using apt,

     ```sh
     sudo apt install stow
     ```

Assuming your dotfiles repo is located at `~/Desktop/dotfiles` on your computer,

2.  Let's remove `symlink.zsh` - a shell script that symlinks our dotfiles to
    their original location. As mentioned earlier we will be replacing
    `symlink.zsh` with GNU Stow.

    ```bash
    cd ~/Desktop/dotfiles
    rm symlink.zsh
    ```

3.  Create Stow packages.

    Let's create Stow packages first, I will explain what Stow packages are
    later.

    ```bash
    cd ~/Desktop/dotfiles
    ls -a
    .  ..  .bashrc  keybindings.json kitty.conf
    ```

    We have 3 dotfiles in our repo,

    - `.bashrc` is bash shell's configuration file, bash looks for `.bashrc` at
      `~` - the user's home directory (`/Users/<username>`).

    - `kitty.conf` is kitty's (a terminal emulator) configuration file, kitty
      looks for `kitty.conf` at `~/.config/kitty/`.

    - Visual Studio Code stores its keyboard shortcuts in `keybindings.json`, it
      looks for `keybindings.json` at `~/Library/Application Support/Code/User`
      in macOS and at `~/.config/Code/User` in Linux.

    To create stow packages,

    - Create a directory named `bash` in your dotfiles repo & move `.bashrc`
      into it.

    - Create a directory named `vscode` in your dotfiles repo & move
      `keybindings.json` into it.

    - Create a directory named `kitty` in your dotfiles repo, inside the `kitty`
      directory create a directory named `.config`, inside the `.config`
      directory create a directory named `kitty` & move `kitty.conf` into it.

    Your dotfiles repo's directory structure should look something like this,

    ```bash
    ~/Desktop/dotfiles
    ❯ tree -a
    .
    ├── bash
    │   └── .bashrc
    ├── kitty
    │   └── .config
    │       └── kitty
    │           └── kitty.conf
    └── vscode
      └── keybindings.json

    6 directories, 3 files
    ```

    The root directory of your dotfiles repo is called the 'Stow directory'
    (`~/Desktop/dotfiles`) and its subdirectories `bash`, `vscode` & `kitty` are
    called 'Stow packages'.

   ```bash
   .  ..  .bashrc  keybindings.json
   ```

   The default `target` directory is parent of the current directory.

   There are two ways to solve this problem,

   1. Move your dotfiles repo to your home directory (`~`).
