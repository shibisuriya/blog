---
title: 'How to manage dotfiles'
date: '2024-06-03'
lastmod: '2024-06-03'
tags:
  [
    'tutorial',
    'dotfiles',
    'distro-hopping',
    'developer-productivity',
    'ricing',
    'docker',
    'unix',
    'linux',
    'gnu-stow',
    'neovim',
    'ansible-playbook',
    'lab',
    'devops',
  ]
draft: false
summary: 'By configuring global gitignore and tweeking '
images: ['/static/images/managing-dotfiles/dotfiles-banner.webp']
layout: PostLayout
---

# What are dotfiles?

Dotfiles are hidden files that are used to configure the behaviour of programs
in Unix-based operating systems like GNU/Linux or macOS. For example, the
dotfile `.zshrc` (typically present in the user's home directory -
`/Users/<username>/`) can be used to configure the user's zsh shell.

# The problem with dotfiles

## Owning multiple computers

Let's say, recently at work your task involves frequently making small changes
to the codebase and then pushing them to the remote (think testing a CI by trail
& error). After scambling through the clunky GUI of vscode to press the "Push
commit" button often, you feel that you will highly benefit from adding a
keyboard shortcut to push the commits to the remote. So you add the keyboard
shortcut and it feels very ergonomic, within hours/days your mind/nervous system
gets used to the keybinding & you start to take it for granted. When you hop
onto your personal computer after work hours or in the weekend you will badly
miss this keybinding (trust me bro ðŸ˜€)! You now have to manually copy all the
keybindings & settings that you changed in your work computer to your personal
computer typically by pressing buttons on a GUI (Graphical User Interface).

This might sound silly, but I think this small inconvenience of manually syncing
the configurations between multiple computers makes using multiple computers
impractical... You might start feeling that one of your computer is better or
more ergonomic than others (even though it might not be true, its just
"Familarity Bias") and you would end up spending most of your time on this "one"
computer because you feel the most productive in it.

Using multiple computers become very practical when you get the same experience
across your computers with very small effort.

What if you were able to sync your settings & keybinding across computers using
a single (obiviously familiar) command,

```bash
git pull origin main
```

Virtual machines & Docker containers can also be considered "computers", if you
are someone who spends a lot of time in virtual machines or docker containers,
consistent experience (think system settings, installed programs, custom
keybindings, appearance, etc.) across your hosts, virtual machines & containers
could be extremely valuable.

## New computers (also think virtual machines & Docker containers)

Typically, most computer users tend to configure their computers for better
ergonomics or higher productivity - to finish their work faster. Configurations
might range from switching on the Dark theme, installing/uninstalling programs,
modifying/adding keybindings, tweaking performance, changing a program's
appearance, etc.

Letting go of a computer and setting up everything from scratch on a new
computer could be daunting especially for users who would have invested a lot of
time & energy configuring their computer the way they like.

People who work with virtual machines or Docker containers a lot might even
change their "computers" in hours or days! Setting up new "computers" frequently
by clicking buttons in a GUI or by typing/pasting tons of commands in a shell is
not practical. Obiviously, tools like `docker build`, Ansible playbook, etc.
help us solve this problem (we will be discussing tools like these in-depth in
this blog post).

## Version control

We must be able to track what changes we made to our dotfiles, when and for what
purpose... This allows us to revert changes we didn't like, also we would be
able to debug and fix issues confidently without second guessing what worked and
what didn't.

The way I manage my dotfiles is opinionated, for example I prefer to use normal
git repo & symlink dotfiles to their locations instead of using a "bare git
repository"... I am aware that there are multiple ways to accompolish the same
objectives in software engineering... So use this blog post as a gentle
introduction to some neat tools & technics that are available to manage
dotfiles.

# Dotfiles repo

Create a directory (name it `.dotfiles`) and move all of your dotfiles into it.

For example, let's move vscode's settings into it,

```bash
mv "~/Library/Application Support/Code/User/settings.json" ~/.dotfiles/vscode/settings.json # macOS
```

Initialize a git repo in the directory.

```bash
git init
```

We will symlink the `settings.json` back to
`~/Library/Application Support/Code/User/` using a neat tool named GNU stow.

# Warning

If you have decided to maintain your dotfiles publically make sure to not commit
and push sensitive information (could include, personal email addresses, JWT
tokens, passwords, etc.) to the remote! If you have pushed sensitive information
to the remote accidentally, make sure to clean up the commit history.

# Ingredients

- Git & Github

- [Nix (the package manager)](https://nixos.org/download)

- [GNU Stow](https://www.gnu.org/software/stow/)

- [Docker](https://www.docker.com/) (for testing/iterating your dotfiles)

- [UTM](https://mac.getutm.app) (uses QEMU under the hood) or
  [QEMU](https://www.qemu.org) (for testing/iterating your dotfiles)

- [Ansible playbook](https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_intro.html)
  (optional, I have replaced it with Nix package manager in my setup)

- [Homebrew](https://brew.sh/) (currently using it with nix-darwin to download &
  install some "non-free" software)

# Don't stray away from the defaults (advice)

Only use a handful of tools, also we must develop the habit of using a software
product the way the developer of the product intended it to be used & not
customize it too much, memorize the default keybindings (only the essential ones
not all), study the default behaviours and do not try to make things look
"pretty" (rabbit hole that has no end)! Do not waste time
[ricing](https://www.reddit.com/r/unixporn/comments/3iy3wd/stupid_question_what_is_ricing/)!
Keep things dead simple.

![Arch linux IQ curve meme](/static/images/blogs/how-to-manage-dotfiles/arch-linux-meme.webp)
